#   –†–∞–∑–Ω–∞—Ä—è–¥–∫–∏ –¥–ª—è –ø–æ—Å—É—Ç–æ—á–Ω–∏–∫–æ–≤

FastAPI —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ webhook –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö.


## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì• **Webhook Integration** - –ø—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö —á–µ—Ä–µ–∑ webhook (create, update, delete)
- üíæ **PostgreSQL Database** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö
- üñ•Ô∏è **Web Interface** - –ø—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤ —É–¥–æ–±–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- üîç **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ø–æ –¥–∞—Ç–µ –∑–∞–µ–∑–¥–∞
- üìä **–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel** - –≤—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- üí∞ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞–º–∏** - —É—á–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º –∏ –æ–±—â–∏—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ø—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å
- üìù **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ loguru
- **–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** 
  - Realty Calendar (webhook)
  - Traveline (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

![main_dashboard](main_dashboard.png)
## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- PostgreSQL 12+

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/darkClaw921/raznaradki_realty_calendar
cd raznaradki_realty_calendar
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
uv sync
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:


## –ó–∞–ø—É—Å–∫

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (PostgreSQL + FastAPI)
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:port`

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

#### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ò—Å–ø–æ–ª—å–∑—É—è —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
./run.sh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
uv run raznaradki_main.py
```

#### –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º

```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```


## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Realty Calendar

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Realty Calendar, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Realty Calendar.
–¥–ª—è —ç—Ç–æ–≥–æ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ Realty Calendar –≤ —Ä–∞–∑–¥–µ–ª–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" -> "Webhooks" -> "–î–æ–±–∞–≤–∏—Ç—å webhook" –∏ –≤–≤–µ—Å—Ç–∏ URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –Ω–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å".
URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫: `http://localhost:port/webhook`




## –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (–¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫)

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

### –ú–∏–≥—Ä–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤

```bash
uv run python add_indexes_migration.py
```

–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –ø–æ–ª—è `apartment_title` –∏ `is_delete` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤. –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —É–º–µ–Ω—å—à–∏—Ç—Å—è —Å ~5 —Å–µ–∫—É–Ω–¥ –¥–æ < 1 —Å–µ–∫—É–Ω–¥—ã.

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —Ä–∞—Å—Ö–æ–¥–æ–≤

```bash
uv run python migrate/create_expenses_table.py
```

–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `expenses` –¥–ª—è —É—á–µ—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://localhost:port`
2. –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `.env` —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `admin`/`admin`)
3. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π:
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ –¥–∞—Ç–µ –∑–∞–µ–∑–¥–∞
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Excel

### Webhook API

–û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/webhook` —Å –¥–∞–Ω–Ω—ã–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
curl -X POST http://localhost:port/webhook \
  -H "Content-Type: application/json" \
  -d @create_booking.json
```

–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö: `create_booking.json`, `update_booking.json`, `delete_booking.json`

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
./test_webhook.sh
```

### API Documentation

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- Swagger UI: `http://localhost:port/docs`
- ReDoc: `http://localhost:port/redoc`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

–¢–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç –¥–≤–∞ —É—Ä–æ–≤–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:

**–£—Ä–æ–≤–µ–Ω—å 1:**
- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –í—ã—Å–µ–ª–µ–Ω–∏–µ
- –ó–∞—Å–µ–ª–µ–Ω–∏–µ  
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**–£—Ä–æ–≤–µ–Ω—å 2:**
- ID, –ê–¥—Ä–µ—Å, –°—Ç–∞—Ç—É—Å –¥–æ–º–∞
- –§–ò–û, –¢–µ–ª–µ—Ñ–æ–Ω, –í—Ä–µ–º—è –≤—ã—Å–µ–ª–µ–Ω–∏—è, –î–∞—Ç–∞ –≤—ã—Å–µ–ª–µ–Ω–∏—è
- –§–ò–û, –¢–µ–ª–µ—Ñ–æ–Ω, –í—Ä–µ–º—è –∑–∞—Å–µ–ª–µ–Ω–∏—è, –î–∞—Ç–∞ –∑–∞—Å–µ–ª–µ–Ω–∏—è
- –ö–æ–ª-–≤–æ –¥–Ω–µ–π, –û–±—â–∞—è —Å—É–º–º–∞, –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞, –î–æ–ø–ª–∞—Ç–∞

## Endpoints

### Webhook
- `POST /webhook` - –ø—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö

### Web UI
- `GET /` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /bookings)
- `GET /login` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- `POST /login` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞
- `GET /logout` - –≤—ã—Ö–æ–¥
- `GET /bookings` - —Å–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º)
- `GET /expenses` - —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º)
- `GET /export` - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel

### –°–ª—É–∂–µ–±–Ω—ã–µ
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ main.py              # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database.py          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îú‚îÄ‚îÄ models.py            # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ schemas.py           # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ crud.py              # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ auth.py              # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ webhook.py       # Webhook endpoints
‚îÇ   ‚îú‚îÄ‚îÄ web.py           # Web UI endpoints
‚îÇ   ‚îî‚îÄ‚îÄ expenses.py      # Expenses endpoints
‚îú‚îÄ‚îÄ static/js/
‚îÇ   ‚îî‚îÄ‚îÄ expenses.js      # JavaScript –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤
‚îî‚îÄ‚îÄ templates/           # HTML —à–∞–±–ª–æ–Ω—ã
    ‚îî‚îÄ‚îÄ expenses.html    # –®–∞–±–ª–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å—Ö–æ–¥–æ–≤
```

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤ —Ñ–∞–π–ª–µ `architecture.md`

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤:
- –ö–æ–Ω—Å–æ–ª—å (—Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥)
- –§–∞–π–ª `logs/app.log` (—Ä–æ—Ç–∞—Ü–∏—è 10MB, —Ö—Ä–∞–Ω–µ–Ω–∏–µ 30 –¥–Ω–µ–π)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ –¥–ª—è production:**
- –ò–∑–º–µ–Ω–∏—Ç–µ `ADMIN_PASSWORD` –≤ `.env`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π `SECRET_KEY`
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS

- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–æ–µ–∫—Ç–∞.

